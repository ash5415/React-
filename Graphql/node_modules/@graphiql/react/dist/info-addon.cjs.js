"use strict";var M=Object.defineProperty;var i=(e,t)=>M(e,"name",{value:t,configurable:!0});var n=require("./codemirror.cjs.js");require("./index.cjs.js");require("react");require("graphql");require("react/jsx-runtime");require("react-dom");n.CodeMirror.defineOption("info",!1,(e,t,r)=>{if(r&&r!==n.CodeMirror.Init){const o=e.state.info.onMouseOver;n.CodeMirror.off(e.getWrapperElement(),"mouseover",o),clearTimeout(e.state.info.hoverTimeout),delete e.state.info}if(t){const o=e.state.info=g(t);o.onMouseOver=h.bind(null,e),n.CodeMirror.on(e.getWrapperElement(),"mouseover",o.onMouseOver)}});function g(e){return{options:e instanceof Function?{render:e}:e===!0?{}:e}}i(g,"createState");function T(e){const{options:t}=e.state.info;return(t==null?void 0:t.hoverTime)||500}i(T,"getHoverTime");function h(e,t){const r=e.state.info,o=t.target||t.srcElement;if(!(o instanceof HTMLElement)||o.nodeName!=="SPAN"||r.hoverTimeout!==void 0)return;const s=o.getBoundingClientRect(),u=i(function(){clearTimeout(r.hoverTimeout),r.hoverTimeout=setTimeout(p,a)},"onMouseMove"),f=i(function(){n.CodeMirror.off(document,"mousemove",u),n.CodeMirror.off(e.getWrapperElement(),"mouseout",f),clearTimeout(r.hoverTimeout),r.hoverTimeout=void 0},"onMouseOut"),p=i(function(){n.CodeMirror.off(document,"mousemove",u),n.CodeMirror.off(e.getWrapperElement(),"mouseout",f),r.hoverTimeout=void 0,C(e,s)},"onHover"),a=T(e);r.hoverTimeout=setTimeout(p,a),n.CodeMirror.on(document,"mousemove",u),n.CodeMirror.on(e.getWrapperElement(),"mouseout",f)}i(h,"onMouseOver");function C(e,t){const r=e.coordsChar({left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}),o=e.state.info,{options:s}=o,u=s.render||e.getHelper(r,"info");if(u){const f=e.getTokenAt(r,!0);if(f){const p=u(f,s,e,r);p&&y(e,t,p)}}}i(C,"onMouseHover");function y(e,t,r){const o=document.createElement("div");o.className="CodeMirror-info",o.append(r),document.body.append(o);const s=o.getBoundingClientRect(),u=window.getComputedStyle(o),f=s.right-s.left+parseFloat(u.marginLeft)+parseFloat(u.marginRight),p=s.bottom-s.top+parseFloat(u.marginTop)+parseFloat(u.marginBottom);let a=t.bottom;p>window.innerHeight-t.bottom-15&&t.top>window.innerHeight-t.bottom&&(a=t.top-p),a<0&&(a=t.bottom);let m=Math.max(0,window.innerWidth-f-15);m>t.left&&(m=t.left),o.style.opacity="1",o.style.top=a+"px",o.style.left=m+"px";let c;const l=i(function(){clearTimeout(c)},"onMouseOverPopup"),d=i(function(){clearTimeout(c),c=setTimeout(v,200)},"onMouseOut"),v=i(function(){n.CodeMirror.off(o,"mouseover",l),n.CodeMirror.off(o,"mouseout",d),n.CodeMirror.off(e.getWrapperElement(),"mouseout",d),o.style.opacity?(o.style.opacity="0",setTimeout(()=>{o.parentNode&&o.remove()},600)):o.parentNode&&o.remove()},"hidePopup");n.CodeMirror.on(o,"mouseover",l),n.CodeMirror.on(o,"mouseout",d),n.CodeMirror.on(e.getWrapperElement(),"mouseout",d)}i(y,"showPopup");
//# sourceMappingURL=info-addon.cjs.js.map
