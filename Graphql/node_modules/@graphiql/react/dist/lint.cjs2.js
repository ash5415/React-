"use strict";var V=Object.defineProperty;var t=(e,r)=>V(e,"name",{value:r,configurable:!0});var I=require("./codemirror.cjs.js"),b=require("graphql");require("./index.cjs.js");require("react");require("react/jsx-runtime");require("react-dom");function v(e){d=e,j=e.length,s=u=N=-1,a(),E();const r=L();return p("EOF"),r}t(v,"jsonParse");let d,j,s,u,N,n,l;function L(){const e=s,r=[];if(p("{"),!x("}")){do r.push(C());while(x(","));p("}")}return{kind:"Object",start:e,end:N,members:r}}t(L,"parseObj");function C(){const e=s,r=l==="String"?G():null;p("String"),p(":");const i=B();return{kind:"Member",start:e,end:N,key:r,value:i}}t(C,"parseMember");function M(){const e=s,r=[];if(p("["),!x("]")){do r.push(B());while(x(","));p("]")}return{kind:"Array",start:e,end:N,values:r}}t(M,"parseArr");function B(){switch(l){case"[":return M();case"{":return L();case"String":case"Number":case"Boolean":case"Null":const e=G();return E(),e}p("Value")}t(B,"parseVal");function G(){return{kind:l,start:s,end:u,value:JSON.parse(d.slice(s,u))}}t(G,"curToken");function p(e){if(l===e){E();return}let r;if(l==="EOF")r="[end of file]";else if(u-s>1)r="`"+d.slice(s,u)+"`";else{const i=d.slice(s).match(/^.+?\b/);r="`"+(i?i[0]:d[s])+"`"}throw k(`Expected ${e} but found ${r}.`)}t(p,"expect");class $ extends Error{constructor(r,i){super(r),this.position=i}}t($,"JSONSyntaxError");function k(e){return new $(e,{start:s,end:u})}t(k,"syntaxError");function x(e){if(l===e)return E(),!0}t(x,"skip");function a(){return u<j&&(u++,n=u===j?0:d.charCodeAt(u)),n}t(a,"ch");function E(){for(N=u;n===9||n===10||n===13||n===32;)a();if(n===0){l="EOF";return}switch(s=u,n){case 34:return l="String",D();case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return l="Number",H();case 102:if(d.slice(s,s+5)!=="false")break;u+=4,a(),l="Boolean";return;case 110:if(d.slice(s,s+4)!=="null")break;u+=3,a(),l="Null";return;case 116:if(d.slice(s,s+4)!=="true")break;u+=3,a(),l="Boolean";return}l=d[s],a()}t(E,"lex");function D(){for(a();n!==34&&n>31;)if(n===92)switch(n=a(),n){case 34:case 47:case 92:case 98:case 102:case 110:case 114:case 116:a();break;case 117:a(),w(),w(),w(),w();break;default:throw k("Bad character escape sequence.")}else{if(u===j)throw k("Unterminated string.");a()}if(n===34){a();return}throw k("Unterminated string.")}t(D,"readString");function w(){if(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102)return a();throw k("Expected hexadecimal digit.")}t(w,"readHex");function H(){n===45&&a(),n===48?a():y(),n===46&&(a(),y()),(n===69||n===101)&&(n=a(),(n===43||n===45)&&a(),y())}t(H,"readNumber");function y(){if(n<48||n>57)throw k("Expected decimal digit.");do a();while(n>=48&&n<=57)}t(y,"readDigits");I.CodeMirror.registerHelper("lint","graphql-variables",(e,r,i)=>{if(!e)return[];let f;try{f=v(e)}catch(c){if(c instanceof $)return[O(i,c.position,c.message)];throw c}const{variableToType:o}=r;return o?U(i,o,f):[]});function U(e,r,i){var f;const o=[];for(const c of i.members)if(c){const h=(f=c.key)===null||f===void 0?void 0:f.value,m=r[h];if(m)for(const[q,Q]of g(m,c.value))o.push(O(e,q,Q));else o.push(O(e,c.key,`Variable "$${h}" does not appear in any GraphQL query.`))}return o}t(U,"validateVariables");function g(e,r){if(!e||!r)return[];if(e instanceof b.GraphQLNonNull)return r.kind==="Null"?[[r,`Type "${e}" is non-nullable and cannot be null.`]]:g(e.ofType,r);if(r.kind==="Null")return[];if(e instanceof b.GraphQLList){const i=e.ofType;if(r.kind==="Array"){const f=r.values||[];return F(f,o=>g(i,o))}return g(i,r)}if(e instanceof b.GraphQLInputObjectType){if(r.kind!=="Object")return[[r,`Type "${e}" must be an Object.`]];const i=Object.create(null),f=F(r.members,o=>{var c;const h=(c=o==null?void 0:o.key)===null||c===void 0?void 0:c.value;i[h]=!0;const m=e.getFields()[h];if(!m)return[[o.key,`Type "${e}" does not have a field "${h}".`]];const q=m?m.type:void 0;return g(q,o.value)});for(const o of Object.keys(e.getFields())){const c=e.getFields()[o];!i[o]&&c.type instanceof b.GraphQLNonNull&&!c.defaultValue&&f.push([r,`Object of type "${e}" is missing required field "${o}".`])}return f}return e.name==="Boolean"&&r.kind!=="Boolean"||e.name==="String"&&r.kind!=="String"||e.name==="ID"&&r.kind!=="Number"&&r.kind!=="String"||e.name==="Float"&&r.kind!=="Number"||e.name==="Int"&&(r.kind!=="Number"||(r.value|0)!==r.value)?[[r,`Expected value of type "${e}".`]]:(e instanceof b.GraphQLEnumType||e instanceof b.GraphQLScalarType)&&(r.kind!=="String"&&r.kind!=="Number"&&r.kind!=="Boolean"&&r.kind!=="Null"||_(e.parseValue(r.value)))?[[r,`Expected value of type "${e}".`]]:[]}t(g,"validateValue");function O(e,r,i){return{message:i,severity:"error",type:"validation",from:e.posFromIndex(r.start),to:e.posFromIndex(r.end)}}t(O,"lintError");function _(e){return e==null||e!==e}t(_,"isNullish");function F(e,r){return Array.prototype.concat.apply([],e.map(r))}t(F,"mapCat");
//# sourceMappingURL=lint.cjs2.js.map
